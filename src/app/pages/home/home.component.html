<h1 id=title>{{ 'global.title' | translate | uppercase }}</h1>

<mat-toolbar>
  
  <app-search (movies)="receiveMovies($event)">
  </app-search>

  <div id="filter">         
    <mat-form-field>
      <mat-label>{{ 'global.byYears' | translate }}</mat-label>
     <mat-select [(ngModel)]="year">
        <mat-option [value]="0">{{ 'global.placeHolderAll' | translate }}</mat-option>
        <mat-option *ngFor="let year of years" [value]="year">
        {{year}}
        </mat-option>
      </mat-select>
  </mat-form-field>
  </div>

  <div id='moviesNumber'>
  <h3 *ngIf="(movies | async) ?.length > 1">{{ (movies | async) ?.length }} {{'global.annonceNombreFilms' | translate}}</h3>
  <h3 *ngIf="(movies | async) ?.length == 1">{{ (movies | async) ?.length }} {{'global.annonceUnSeulFilm' | translate}}</h3>
  <h3 *ngIf="(movies | async) ?.length == 0">{{'global.annonceZeroFilm' | translate}}</h3>
  </div>


</mat-toolbar>

<div *ngFor="let movie of movies | async" class="movies"> 
  <div class="box" *ngIf="(movie.year == year) || year == 0">
    <mat-card class='card'>
    <h2 class="title"> 
      <a>
      {{ movie.title }}
      </a>
    </h2>

  <div class="card-footer">
    <h3>{{movie.year}}, {{ movie.year | elapsedTime | async }}</h3>
    <div *ngIf="user; then logged else unlogged"></div>
      <ng-template #logged>
        <mat-icon [routerLink]="['../', 'movie', movie.idMovie]">visibility</mat-icon>
      </ng-template>
      <ng-template  #unlogged>
        <mat-icon (click)="snackbarToLogin(movie.idMovie)">visibility</mat-icon>
      </ng-template>
      <mat-icon 
        id="heart" 
      (click)="likeIt(movie)" 
      *ngIf="movie.timesLiked == 0"
      [@heartGrowing]="movie.animationState"
        >favorite_border</mat-icon>
      <mat-icon *ngIf="movie.timesLiked > 0"
        matBadge="{{ movie.timesLiked }}"
        matBadgeColor="warn"
        [@heartSmalling]="movie.animationState">favorite</mat-icon>
  </div>

      <img src="{{movie.image}}">

    </mat-card>
  </div>
</div>